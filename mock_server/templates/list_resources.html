{% extends "layout.html" %}

{% block header %}
{% set active_page = "list_resources" %}
{% end %}

{% block body %}

<div class="span3 bs-docs-sidebar">
    <ul class="nav nav-list bs-docs-sidenav affix">
      {% for path in paths %}
      <li class=""><a href="#{{path["url_path"]}}"><i class="icon-chevron-right"></i> {{path["url_path"]}}</a></li>
      {% end %}
    </ul>
</div>

<div class="span9">
    <div class="page-header">
        <h1>List resources</h1>
    </div>

    {% for path in paths %}{% for method_status, formats in path["files"].iteritems() %}
    <section id="{{path["url_path"]}}">
    <div class="navbar">
      <div class="navbar-inner">
        <a class="brand" href="#">{{method_status[0]}} /{{path["url_path"]}} - {{method_status[1]}}</a>
        <ul class="nav">
          {% for i, format in enumerate(formats) %}
          <li {% if i == 0 %}class="active"{% end %}><a class="trigger-{{method_status[0]}}{{path["id"]}}{{method_status[1]}}" href="#{{method_status[0]}}{{path["id"]}}{{method_status[1]}}{{i}}" data-toggle="tab">{{format[0]}}</a></li>
          {% end %}
        </ul>
        <ul class="nav pull-right">
            <li class="divider-vertical"></li>
            <li><a data-format="{{formats[0][0]}}" id="trigger-{{method_status[0]}}{{path["id"]}}{{method_status[1]}}-edit" class="edit-button" href="/__manage/create?url_path={{path["url_path"]}}&method={{method_status[0]}}&status_code={{method_status[1]}}&format=">Edit</a></li>
        </ul>
      </div>
      <div class="tab-content">
          {% for i, format in enumerate(formats) %}
          <div id="{{method_status[0]}}{{path["id"]}}{{method_status[1]}}{{i}}" class="tab-pane{% if i == 0 %} active{% end %}">
            <pre class="prettyprint linenums">{{format[1]}}</pre>
            <pre class="prettyprint">
            curl -v -X {{method_status[0]}} http://{{address}}:{{port}}/{{path["url_path"]}}.{{format[0]}}{% if method_status[1] != "200" %}?__statusCode={{method_status[1]}}{% end %}
            </pre>
          </div>
          {% end %}
      </div>
    </div>
    </section>

    {% end %}{% end %}
</div>
{% end %}

{% block javascripts %}
<script src="/__static/js/list-resources.js" type="text/javascript" charset="utf-8"></script>
{% end %}
